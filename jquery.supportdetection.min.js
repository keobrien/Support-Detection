/*
Project Name: Support Detection
URL: https://github.com/keobrien/Support-Detection
Author: Kevin O'Brien
Company: Clockwork Acive Media Systems
Company Site: clockwork.net
License: MIT
Copyright (C) 2012 Clockwork Active Media Systems
Version: .1
**************************************/

(function(b){b.fn.supportdetection=function(a){return new b.supportdetection(b(this),a)};b.supportdetection=function(a,c){this.el=a;this.s=b.extend({cookies:!0,mookie_msg:'<p id="support-cookies">Please enable cookies to view this site. <a href="http://support.google.com/accounts/bin/answer.py?hl=en&answer=61416" target="_blank">How to enable Cookies</a>.</p>',safari:531,chrome:535,msie:7,mozilla:12,opera:!1,browser_msg:'<p id="support-browser">Your browser may not support this site. Pages might not look or function quite right until you update your browser or download the latest version of <a href="http://www.google.com/chrome">Google Chrome</a> or <a href="http://www.mozilla.org/en-US/firefox/new/">Firefox</a>.</p>',defaulttest_browser:!1,ipad:534,ipod:6533,iphone:6533,android:533,blackberry:!1,windows_phone:!1,test_device:!1,ipad_os:4.3,ipod_os:4.3,iphone_os:4.3,android_os:2.3,blackberry_os:!1,windows_phone_os:!1,device_msg:'<p id="support-device">Your device may not support this site. Pages might not look or function quite right. If you are using Android or iOS (iPhone, iPad or iPods) please try updating your operating system</p>',test_mobile_os:!1},c);this.uagent=navigator.userAgent.toLowerCase();this.mobile=!1;defaultthis.found={};this.not_supported=[];this.test_cookies();this.test_devices();this.mobile?(this.get_os_version(),this.s.test_mobile_os&&this.test_os_version()):this.test_browser&&this.test_browsers();return this};b.supportdetection.prototype={test_cookies:function(){var a=navigator.cookieEnabled?!0:!1;"undefined"==typeof navigator.cookieEnabled&&!a&&(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1);!a&&this.s.cookies&&(this.el.append(this.s.mookie_msg).show(),this.not_supported.push("cookies"))},defaultget_os_version:function(){if("blackberry"==this.found.device)if(0<=this.uagent.indexOf("version/")){var a=this.uagent.indexOf("version/")+8;this.found.os=parseInt(this.uagent.substring(a,a+3))}else this.found.os=parseInt(this.uagent.split("/")[1].substring(0,3));else"android"==this.found.device?this.found.os=parseInt(this.uagent.toString().split(";")[2].replace(/android/g,"").replace(/ /g,"")):"ipad"==this.found.device||"ipod"==this.found.device||"iphone"==this.found.device?this.found.os=parseInt(this.uagent.toString().split(")")[0].split("os ")[1].split(" ")[0].replace("_",default".")):"windows_phone"==this.found.device&&(this.found.os=parseInt(this.uagent.toString().split(";")[2].split("os ")[1]));this.found.os_supported=this.s[this.found.device+"_os"]},test_os_version:function(){this.s[this.found.device+"_os"]&&this.found.os<this.found.os_supported&&this.devive_not_supported(this.found.device.toString()+"_os")},test_devices:function(){for(var a="ipad;ipod;iphone;android;blackberry;windows phone".split(";"),b=0;b<a.length;b++)if(-1<this.uagent.indexOf(a[b])){this.test_device_version(a[b].replace(" ",default"_"));break}-1<this.uagent.indexOf("iemobile")&&this.test_device_version("windows_phone")},test_device_version:function(a){this.mobile=!0;this.found.device=a;this.found.browser_version=b.browser.version;this.found.supported_browser_version=this.s[a];!this.s.test_mobile_os&&this.test_device&&(!this.s[a]||b.browser.version<this.s[a])&&this.devive_not_supported(a)},test_browsers:function(){var a=-1<this.uagent.indexOf("chrome"),c=-1<this.uagent.indexOf("safari");a&&c&&(c=!1);b.browser.msie?this.test_browser_version("msie"):defaultb.browser.mozilla?this.test_browser_version("mozilla"):b.browser.opera?this.test_browser_version("opera"):!c&&b.browser.webkit?this.test_browser_version("chrome"):c?this.test_browser_version("safari"):this.browser_not_supported("unknown")},test_browser_version:function(a){this.found.browser=a;this.found.browser_version=b.browser.version;this.found.supported_browser_version=this.s[a];this.s[a]&&b.browser.version<this.s[a]&&this.browser_not_supported(a)},browser_not_supported:function(a){this.el.append(this.s.browser_msg).show();defaultthis.not_supported.push(a)},devive_not_supported:function(a){this.el.append(this.s.device_msg).show();this.not_supported.push(a)}}})(jQuery);